<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
          Android高级进阶笔记 - fancy的博客 | fancy&#39;s Blog
        
    </title>

    <link rel="canonical" href="http://fancychendong.github.io/2017/01/20/Android高级进阶笔记/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">fancychendong&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archives/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    
<!-- Image to hack wechat -->
<!-- <img src="http://fancychendong.github.io/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="{{ site.baseurl }}/{% if page.header-img %}{{ page.header-img }}{% else %}{{ site.header-img }}{% endif %}" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/home-bg.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#android" title="android">android</a>
                        
                    </div>
                    <h1>Android高级进阶笔记</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by xiaodong Chen on
                        2017-01-20
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1 id="Android高级进阶笔记"><a href="#Android高级进阶笔记" class="headerlink" title="Android高级进阶笔记"></a>Android高级进阶笔记</h1><p>[TOC]</p>
<h2 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h2><h3 id="动画机制"><a href="#动画机制" class="headerlink" title="动画机制"></a>动画机制</h3><h4 id="帧动画-Frame-Animation"><a href="#帧动画-Frame-Animation" class="headerlink" title="帧动画 Frame Animation"></a>帧动画 Frame Animation</h4><p>使用xml文件配置<code>&lt;animation-list&gt;</code></p>
<p>使用代码方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">AnimationDrawable.addFrame(drawable, 120)</div><div class="line">imageView.setBackgroundDrawable(animationDrawable);</div><div class="line">animationDrawable.start();</div><div class="line">animationDrawable.stop();</div></pre></td></tr></table></figure></p>
<h4 id="补间动画-Tween-Animation"><a href="#补间动画-Tween-Animation" class="headerlink" title="补间动画 Tween Animation"></a>补间动画 Tween Animation</h4><p>插值器Interpolator<br>AlphaAnimation    : &lt;alpha<br>ScaleAnimation    : &lt;scale<br>TranslateAnimation    : &lt;translate<br>RotateAnimation    : &lt;rotate</p>
<p>自定义补间动画<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public class MyAnimation extends Animation &#123;</div><div class="line">	@Override</div><div class="line">	protected void applyTransformation(float interpolatedTime, Transformation transformation) &#123;</div><div class="line">	super...();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>重载函数参数：interpolatedTime表示动画的时间进行比例，从0到1；transformation表示补间动画在不同时刻对View的变形程度。</p>
<h3 id="属性动画-Property-Animator"><a href="#属性动画-Property-Animator" class="headerlink" title="属性动画 Property Animator"></a>属性动画 Property Animator</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">private void perform() &#123;</div><div class="line">        ViewGroup viewGroup = (ViewGroup) findViewById(android.R.id.content);</div><div class="line">        final View contentView = viewGroup.getChildAt(0);</div><div class="line">        ValueAnimator valueAnimator = ValueAnimator.ofObject(new ArgbEvaluator(), 0xffffffff, 0xff555555);</div><div class="line">        valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onAnimationUpdate(ValueAnimator animation) &#123;</div><div class="line">                contentView.setBackgroundColor((Integer) animation.getAnimatedValue());</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        valueAnimator.setDuration(2000).setStartDelay(1000);</div><div class="line">        valueAnimator.start();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>这里需要注意下的是int色值要用16进制，且八位，前两个是alpha透明度。argb依次类推。</p>
<p>ObjectAnimator是ValueAnimator的子类。一般只有ObjectAnimator实现不了的才考虑使用ValueAnimator。</p>
<p>属性动画，顾名思义，就是对象的属性，对象的属性就是指setXXX的方法，当然java命名要规范，按照驼峰，当给ObjectAnimator指定属性名的时候第一个字母小写。<br>ObjectAnimator即可以代码写，也可以通过xml配置。</p>
<h3 id="过渡动画-Transition-Animation"><a href="#过渡动画-Transition-Animation" class="headerlink" title="过渡动画 Transition Animation"></a>过渡动画 Transition Animation</h3><p>Android Transition Framwork 主要用来做三件事：</p>
<ol>
<li>Activity间的转场动画；</li>
<li>不同Activity或Fragment间元素共享，让交互更连贯；</li>
<li>同一个Activity之间一些View的变换动画。</li>
</ol>
<p><img src="./1481032933787.png" alt="Alt text"><br>当从ActivityA切换到ActivityB时我们可以跟以前一样分别定义A的退出动画和B的进入动画，5.0之后android.transition.Transition提供给我们三个可以直接使用的transition：Explode,Slide,Fade.</p>
<p>而你需要做的，首先对Activity的ThemeStyle添加windowContentTransitions属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;ActivityTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;</div><div class="line">        &lt;!-- 允许使用transitions --&gt;</div><div class="line">        &lt;item name=&quot;android:windowContentTransitions&quot;&gt;true&lt;/item&gt;</div><div class="line">        &lt;!--是否覆盖执行，其实可以理解成是否同步执行还是顺序执行--&gt;</div><div class="line">        &lt;item name=&quot;android:windowAllowEnterTransitionOverlap&quot;&gt;true&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;android:windowAllowReturnTransitionOverlap&quot;&gt;true&lt;/item&gt;</div><div class="line">    &lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p>如果你的minSdkVersion低于21，则需要把上述配置放在values-v21资源包下。</p>
<p>ActivityA<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">private void configExitTransition() &#123;</div><div class="line">        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">            Slide slide = new Slide();</div><div class="line">            slide.setDuration(800);</div><div class="line">            getWindow().setExitTransition(slide);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void explode(View view) &#123;</div><div class="line">        startActivityBWithTransitionAnima(&quot;explode&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void slide(View view) &#123;</div><div class="line">        startActivityBWithTransitionAnima(&quot;slide&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void fade(View view) &#123;</div><div class="line">        startActivityBWithTransitionAnima(&quot;fade&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private void startActivityBWithTransitionAnima(String transitionName) &#123;</div><div class="line">        Intent intent = new Intent(this, ActivityB.class);</div><div class="line">        intent.putExtra(&quot;transition&quot;, transitionName);</div><div class="line">        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) &#123;</div><div class="line">            startActivity(intent, ActivityOptionsCompat.makeSceneTransitionAnimation(this).toBundle());</div><div class="line">        &#125; else &#123;</div><div class="line">            startActivity(intent);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>ActivityB<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">private void handleIntent() &#123;</div><div class="line">        Intent intent = getIntent();</div><div class="line">        if (intent != null &amp;&amp; intent.getExtras() != null) &#123;</div><div class="line">            String transition = intent.getExtras().getString(&quot;transition&quot;, &quot;fade&quot;);</div><div class="line">            if (transition.equals(&quot;explode&quot;)) &#123;</div><div class="line">                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                    Explode explode = new Explode();</div><div class="line">                    explode.setDuration(1000);</div><div class="line">                    getWindow().setEnterTransition(explode);</div><div class="line">                &#125;</div><div class="line">            &#125; else if (transition.equals(&quot;slide&quot;)) &#123;</div><div class="line">                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                    Slide slide = new Slide(Gravity.RIGHT);</div><div class="line">                    slide.setDuration(1000);</div><div class="line">                    getWindow().setEnterTransition(slide);</div><div class="line">                &#125;</div><div class="line">            &#125; else if (transition.equals(&quot;fade&quot;)) &#123;</div><div class="line">                if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;</div><div class="line">                    Fade fade = new Fade();</div><div class="line">                    fade.setDuration(1000);</div><div class="line">                    getWindow().setEnterTransition(fade);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>让我们来分析以下具体发生了什么：</p>
<ul>
<li>首先ActivityA启动了ActivityB；</li>
<li>Transition Framework找到A的退出动画（Slide）并且应用；</li>
<li>Transition Framework找到B的进入动画（Explode）并且应用；</li>
<li>返回事件被触发后，Transition Framework执行进入动画和退出动画的逆向过程（但是如果我们定义了returnTransition和reenterTransition动画，返回效果将会按照我们定义的动画执行）。</li>
</ul>
<p><strong>元素共享</strong><br><img src="./1481121912237.png" alt="Alt text"></p>
<ol>
<li>首先我们需要做的仍然是去定义Theme的android:windowContentTransitions为true；</li>
<li>然后对不同activity或fragment的共享的view元素设置统一的 android:transitionName：</li>
<li>使用ActivityOptions.makeSceneTransitionAnimation()来定义共享的view和transitionName</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mIntent.setClass(this, ShareElementsActivity.class);</div><div class="line">ActivityOptions transitionActivityOptions = ActivityOptions.makeSceneTransitionAnimation(MainActivity.this, findViewById(R.id.img_share), &quot;share&quot;);</div><div class="line">startActivity(mIntent, transitionActivityOptions.toBundle());</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Slide slideTransition = new Slide(Gravity.LEFT);</div><div class="line">slideTransition.setDuration(1000L);</div><div class="line">ChangeBounds changeBoundsTransition = new ChangeBounds();</div><div class="line">changeBoundsTransition.setDuration(1000L);</div><div class="line">sharedElementFragment2.setEnterTransition(slideTransition);</div><div class="line">sharedElementFragment2.setAllowEnterTransitionOverlap(true);</div><div class="line">sharedElementFragment2.setAllowReturnTransitionOverlap(true);</div><div class="line">sharedElementFragment2.setSharedElementEnterTransition(changeBoundsTransition);</div><div class="line">getFragmentManager().beginTransaction()</div><div class="line">        .replace(R.id.framelayout_container, sharedElementFragment2)</div><div class="line">        .addToBackStack(null)</div><div class="line">        .addSharedElement(sharedView, &quot;share&quot;)</div><div class="line">        .commit();</div></pre></td></tr></table></figure>
<p>如果两个不同界面有多个元素需要共享的话，使用Pair来包装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mIntent.setClass(this, ShareElementsActivity.class);</div><div class="line">ActivityOptions transitionActivityOptions = ActivityOptions.makeSceneTransitionAnimation(MainActivity.this</div><div class="line">        , Pair.create(findViewById(R.id.img_share), &quot;share&quot;)</div><div class="line">        , Pair.create(findViewById(R.id.tv_share), &quot;share_text&quot;));</div><div class="line">startActivity(mIntent, transitionActivityOptions.toBundle());</div></pre></td></tr></table></figure></p>
<h3 id="Support-Annotation-Library使用"><a href="#Support-Annotation-Library使用" class="headerlink" title="Support Annotation Library使用"></a>Support Annotation Library使用</h3><p>Android Support Library中有个support-annotations帮助我们完善自身代码质量。</p>
<p>support-annotation里的注解的RetentionPolicy是CLASS级别的，即会编译到.class中，但在运行中获取不到。也是默认的级别。</p>
<ul>
<li>@NonNull 作用于函数参数和返回值</li>
</ul>
<p><strong>资源类型注解</strong><br>比如：<code>@LayoutRes, @IdRes, @ColorRes等</code></p>
<p><strong>类型定义注解</strong></p>
<ul>
<li>@IntDef/@StringDef 用来创建一个整型/字符串类型定义的新注解</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">Retention(RetentionPolicy.SOURCE)</div><div class="line">    @IntDef(&#123;ONE, THREE, TWO&#125;)</div><div class="line">    public @interface NavMode &#123;&#125;</div><div class="line"></div><div class="line">    public static final int ONE = 1;</div><div class="line">    public static final int TWO = 2;</div><div class="line">    public static final int THREE = 3;</div><div class="line"></div><div class="line">    @NavMode</div><div class="line">    private int getMode() &#123;</div><div class="line">        int i = 9;</div><div class="line">        int b = 2;</div><div class="line">        i = i + b;</div><div class="line">        return i;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><strong>线程注解</strong></p>
<ul>
<li>@UIThread @MainThread @WorkerThread @BinderThread</li>
</ul>
<p><strong>RGB色值注解</strong></p>
<ul>
<li>@ColorInt</li>
</ul>
<p><strong>值范围注解</strong></p>
<ul>
<li><p>@Size 对于数组、集合、字符串之类的参数，可以使用该注解表示这些参数的大小<br><code>@Size(min=1),@Size(max=23),@Size(2), @Size(multiple=2)可以表示数组大小是2的倍数</code></p>
</li>
<li><p>@IntRange 参数类型int或long的范围<br><code>@IntRange(from=0,to=255)</code><br>同理 @FloatRange</p>
</li>
</ul>
<p><strong>权限注解</strong><br>为了在编译期及时发现缺失的权限，使用@RequestPermission</p>
<p><code>@RequestPermission(Manifest.permission.SET_WALLPAPER)
RequestPermission(anyOf = {Manifest.permission.SET_WALLPAPER, Manifest.permission.SET_WALLPAPER}) 至少一个权限
RequestPermission(allOf = {Manifest.permission.SET_WALLPAPER, Manifest.permission.SET_WALLPAPER}) 同时声明多个权限</code></p>
<p><strong>重写函数注解</strong><br>如果重写函数希望调用super，则可以用@CallSuper</p>
<p><strong>返回值注解</strong><br>CheckResult (suggest=”#提示信息”)<br>调用该函数的返回值需要检查</p>
<p><strong>@VisibleForTesting</strong></p>
<p><strong>@Keep</strong>不被混淆</p>
<p>使用了support-annotation的库工程，生成的aar会将annotation的信息一起打包到aar里，以便调用者正常使用。</p>
<h3 id="Percent-Support-Library使用详解"><a href="#Percent-Support-Library使用详解" class="headerlink" title="Percent Support Library使用详解"></a>Percent Support Library使用详解</h3><p>添加依赖<code>compile &#39;com.android.support:percent:23.4.0&#39;</code><br>提供了PercentRelativeLayout、PercentFrameLayout。可以很方便的使用百分比布局。</p>
<p>有以下属性：</p>
<p>layout_widthPercent、layout_heightPercent、 layout_marginPercent、layout_marginLeftPercent、 layout_marginTopPercent、layout_marginRightPercent、 layout_marginBottomPercent、layout_marginStartPercent、layout_marginEndPercent。</p>
<p>添加对LinearLayout的支持<br><a href="https://github.com/JulienGenoud/android-percent-support-lib-sample" target="_blank" rel="external">https://github.com/JulienGenoud/android-percent-support-lib-sample</a><br>扩充了support-percent的功能<br><a href="https://github.com/hongyangAndroid/android-percent-support-extend" target="_blank" rel="external">https://github.com/hongyangAndroid/android-percent-support-extend</a></p>
<h3 id="Design-Support-Library-使用详解"><a href="#Design-Support-Library-使用详解" class="headerlink" title="Design Support Library 使用详解"></a>Design Support Library 使用详解</h3><p>Design Support Library可以使开发者在Android2.1以上的设备实现Material Design效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">     compile &apos;com.android.support:design:23.4.0&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>Snackbar</strong><br>类似Toast提示功能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">Snackbar snackbar = Snackbar.make(getWindow().getDecorView(), &quot;消息内容:最多显示两行最多&quot;, Snackbar.LENGTH_SHORT);</div><div class="line">        snackbar.setAction(&quot;确定&quot;, new View.OnClickListener() &#123;</div><div class="line">            @Override</div><div class="line">            public void onClick(View view) &#123;</div><div class="line">                Toast.makeText(ActivitySnackbar.this, &quot;-&quot;, Toast.LENGTH_SHORT).show();</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        snackbar.setCallback(new Snackbar.Callback() &#123;</div><div class="line">            @Override</div><div class="line">            public void onDismissed(Snackbar snackbar, int event) &#123;</div><div class="line">                ToastUtil.toast(&quot;消失了&quot;);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            @Override</div><div class="line">            public void onShown(Snackbar snackbar) &#123;</div><div class="line">                ToastUtil.toast(&quot;出现了&quot;);</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        snackbar.show();</div></pre></td></tr></table></figure></p>
<p>第一个参数需要传入一个View，可以是界面当中的任意一个View控件，Snackbar会自动根据这个控件找到最外层的布局来显示</p>
<p>第二个参数就是我们需要显示的内容，注意这里的内容最多显示两行哦，超出两行后的内容会变成“…”</p>
<p>第三个参数为Snackbar显示的时长，有三种模式供选择<br>LENGTH_SHORT：短时间显示<br>LENGTH_LONG：长时间显示<br><code>LENGTH_INDEFINITE：一直显示，只有当用户触发Action点击事件或手动删除时才会消失</code><br>Snackbar还支持滑出删除，需要在布局文件中使用CoordinatorLayout作为根布局<br><img src="./1481380939255.png" alt="Alt text"><br>建议要使用Snackbar的时候最好是以CoordinatorLayout作为根布局，如果以其它RelativeLayout，LinearLayout等作为根布局的话，会出现以下这种情况<br><a href="http://img.blog.csdn.net/20160825112508891![Alt" target="_blank" rel="external">http://img.blog.csdn.net/20160825112508891![Alt</a> text](./1481380977604.png)<br>FloatingActionButton被遮到了，使用CoordinatorLayout作为根布局可以避免这种情况<br><a href="http://img.blog.csdn.net/20160825113217112![Alt" target="_blank" rel="external">http://img.blog.csdn.net/20160825113217112![Alt</a> text](./1481380996541.png)</p>
<p>Snackbar只能在底部显示吗？<br>是也不是，为啥这么说呢，Snackbar确实是在CoordinatorLayout底部显示的，但并不等于是在屏幕顶部。这个要查看Snackbar的源代码才能知道为什么，Snackbar会显示在传入的View的底部。<br>可以根据snackbar.getView()获取到Snackbar的布局，从而修改这个布局的一些样式。</p>
<p><strong>TextInputLayout</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.design.widget.TextInputLayout</div><div class="line">        android:id=&quot;@+id/textinputlayout&quot;</div><div class="line">        android:layout_width=&quot;200dp&quot;</div><div class="line">        android:layout_height=&quot;wrap_content&quot;</div><div class="line">        android:layout_margin=&quot;20dp&quot;&gt;</div><div class="line">        &lt;EditText</div><div class="line">            android:layout_width=&quot;match_parent&quot;</div><div class="line">            android:layout_height=&quot;50dp&quot;/&gt;</div><div class="line">    &lt;/android.support.design.widget.TextInputLayout&gt;</div></pre></td></tr></table></figure></p>
<p>需要通过代码设置setHint动画才能生效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">private void initTextInputLayout() &#123;</div><div class="line">        mTextInputLayout = (TextInputLayout) findViewById(R.id.textinputlayout);</div><div class="line">        mTextInputLayout.setHint(&quot;测试一下textinputlayout的特性hint&quot;);</div><div class="line">        mTextInputLayout.clearFocus();</div><div class="line">    &#125;</div><div class="line">    public void onClick(View view) &#123;</div><div class="line">        mTextInputLayout.setErrorEnabled(true);</div><div class="line">        mTextInputLayout.setError(&quot;错误了&quot;);</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>使用TextInputLayout感觉比较麻烦的是修改它的样式<br>取消动画<br><code>可以通过TextInputLayout对象，执行setHintAnimationEnabled(boolean enabled)方法,或者在xml里添加hintAnimationEnabled属性设置</code></p>
<p>设置hint移动到上方以后的颜色和字体大小<br><code>在XML里对应的TextInputLayout标签下添加hintTextAppearance属性</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;android.support.design.widget.TextInputLayout</div><div class="line">    ……</div><div class="line"> xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;app:hintTextAppearance=&quot;@style/FloatingStyle&quot;&gt;</div><div class="line">    &lt;EditText</div><div class="line">        …… /&gt;</div><div class="line">&lt;/android.support.design.widget.TextInputLayout&gt;</div></pre></td></tr></table></figure></p>
<p>然后在res-&gt;values-&gt;styles.xml下添加一个style<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;FloatingStyle&quot; parent=&quot;@android:style/TextAppearance&quot;&gt;</div><div class="line">    &lt;!-- 字体颜色 --&gt;</div><div class="line">    &lt;item name=&quot;android:textColor&quot;&gt;#AA00FF&lt;/item&gt;</div><div class="line">    &lt;!-- 字体大小 --&gt;</div><div class="line">    &lt;item name=&quot;android:textSize&quot;&gt;20sp&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p>设置下划线的颜色<br><code>修改res-&gt;values-&gt;styles.xml下”AppTheme”里的colorAccent属性</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!-- Base application theme. --&gt;</div><div class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;</div><div class="line">    &lt;!-- Customize your theme here. --&gt;</div><div class="line">    ……</div><div class="line">    &lt;item name=&quot;colorAccent&quot;&gt;#0000FF&lt;/item&gt;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p><code>谷歌把Design Support Library写的很好。每一个控件的颜色都是直接通过主题颜色绘制的，在 style.xml 中指定。打开它添加colorAccent 到主题以改变表单的颜色。在 style.xml 中修改相关的属性</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt;</div><div class="line">        &lt;item name=&quot;colorPrimary&quot;&gt;@color/primary&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/primary_dark&lt;/item&gt;</div><div class="line"></div><div class="line">        &lt;!--&lt;item name=&quot;colorAccent&quot;&gt;#3498db&lt;/item&gt;--&gt;</div><div class="line">        &lt;item name=&quot;android:textColorHint&quot;&gt;@color/alpha_white&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;colorControlNormal&quot;&gt;@color/alpha_white&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;colorControlActivated&quot;&gt;@color/white&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;colorControlHighlight&quot;&gt;@color/white&lt;/item&gt;</div><div class="line">        &lt;item name=&quot;android:windowTranslucentStatus&quot;&gt;true&lt;/item&gt;</div><div class="line">    &lt;/style&gt;</div></pre></td></tr></table></figure></p>
<p><img src="./1481463428695.png" alt="Alt text"><br>这张图片基本说明了colorAccent 代表的颜色，而在google 的官网上：<br><a href="https://www.google.com/design/spec/style/color.html#color-color-schemes" target="_blank" rel="external">https://www.google.com/design/spec/style/color.html#color-color-schemes</a> 也有相关的说明</p>
<p><code>android:textColorHint 代表 hint 的颜色 
colorControlNormal 代表 下划线没有获取焦点的颜色 
colorControlActivated，colorControlHighlight 代表了获取焦点或者点击的时候 下划线 的颜色</code></p>
<p>错误提示的颜色说明<br><code>在设置布局的时候errorTextAppearance这个属性，自定义style 写颜色和大小就可以了，至于另一个属性hintTextAppearance 这个属性修改颜色，好像没有什么效果，不起作用。</code></p>
<p>有的机器上面可能没有效果，下面提供一种解决方案：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">public static void setErrorTextColor(TextInputLayout textInputLayout, int color) &#123;</div><div class="line">        try &#123;</div><div class="line">            Field fErrorView = TextInputLayout.class.getDeclaredField(&quot;mErrorView&quot;);</div><div class="line">            fErrorView.setAccessible(true);</div><div class="line">            TextView mErrorView = (TextView) fErrorView.get(textInputLayout);</div><div class="line">            Field fCurTextColor = TextView.class.getDeclaredField(&quot;mCurTextColor&quot;);</div><div class="line">            fCurTextColor.setAccessible(true);</div><div class="line">            fCurTextColor.set(mErrorView, color);</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p><code>需要注意的是： 
setErrorTextColor(titleTextInput,getResources().getColor(R.color.grey)); 
需要在titleTextInput.setErrorEnabled(true);之前调用</code></p>
<p>这个是 material design 的说明文档，收藏记录下：</p>
<p><a href="https://www.google.com/design/spec/components/text-fields.html#text-fields-multi-line-text-field" target="_blank" rel="external">https://www.google.com/design/spec/components/text-fields.html#text-fields-multi-line-text-field</a></p>
<p><strong>TabLayout</strong><br>该控件的使用方式就更简单了，主要是实现类似网易新闻头部可滚动的tab了，没出来前都用github上的。<br>主要关于TabLayout和ViewPager结合使用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">FragmentAdapter mFragmentAdapteradapter =</div><div class="line">                new FragmentAdapter(getSupportFragmentManager(), fragments, titles);</div><div class="line">        //给ViewPager设置适配器</div><div class="line">        mViewPager.setAdapter(mFragmentAdapteradapter);</div><div class="line">        //将TabLayout和ViewPager关联起来。</div><div class="line">        mTabLayout.setupWithViewPager(mViewPager);</div><div class="line">        //给TabLayout设置适配器</div><div class="line">        mTabLayout.setTabsFromPagerAdapter(mFragmentAdapteradapter);</div></pre></td></tr></table></figure></p>
<p>TabLayout不仅头部导航，也可作为底部导航哦！</p>
<h3 id="ANR产生的原因及其定位分析"><a href="#ANR产生的原因及其定位分析" class="headerlink" title="ANR产生的原因及其定位分析"></a>ANR产生的原因及其定位分析</h3><ol>
<li>ANR产生的原因<br>只有当UI线程响应超时时才会引起ANR，超时产生的原因主要有两个方面：</li>
</ol>
<ul>
<li>当前事件没有机会得到处理，例如UI线程正在响应另外一个事件，当前事件被阻塞。</li>
<li>当前事件正在处理，但由于耗时太长没及时处理完。</li>
</ul>
<p>根据ANR产生的原因不同，超时事件也不尽相同。产生ANR问题原因有三种，分别对应Android四大组件中的三个(Activity/View，BroadcastReceiver，Service)<br>KeyDispatchTimeout : 5秒内无法得到响应</p>
<p>BroadcastTimeout ：onReceive()函数运行在主线程，10秒内无法处理完成</p>
<p>ServiceTimeout ：各个生命周期函数，20秒内无法完成</p>
<ol>
<li>典型ANR问题场景</li>
</ol>
<ul>
<li>UI线程耗时操作</li>
<li>UI线程等待子线程释放某个锁</li>
<li>耗时的动画，需要大量运算，导致CPU负载过重</li>
</ul>
<ol>
<li><p>ANR问题定位和分析<br>当发生ANR的时候，可以结合控制台里的Logcat的日志信息和生成在手机内部存储的/data/anr/xxx.txt文件进行分析和定位。</p>
</li>
<li><p>ANR避免和检测<br>可以借助工具进行检测，从而避免ANR的引入。<br>StrictMode严格模式，主要用来检测两大类问题</p>
</li>
</ol>
<ul>
<li><p>线程策略 ThreadPolicy<br>detectCustomSlowCalls 检测自定义耗时操作<br>detectDiskReads 检测是否存在磁盘读取操作<br>detectDiskWrites 检测是否存在磁盘写入操作<br>detectNetwork 检测是否存在网络操作</p>
</li>
<li><p>虚拟机策略 VmPolicy<br>detectActivityLeaks 检测是否存在Activity泄漏<br>detectLeakeddClosableObjects 检测是否存在未关闭的Closable对象泄漏<br>detectLeakedSqLiteObjects 检测是否存在Sqlite对象泄漏<br>setClassInstanceLimit 检测类实例个数是否超过限制</p>
</li>
</ul>
<p>直接通过代码开启，在应用的启动初始化的地方执行如下代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if (BuildConfig.DEBUG) &#123;</div><div class="line">            //开启线程模式</div><div class="line">            StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectAll().penaltyLog().build());</div><div class="line">            //开启虚拟机模式</div><div class="line">            StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll().penaltyLog().build());</div><div class="line">        &#125;</div></pre></td></tr></table></figure></p>
<p>当然可以根据自己的情况detect对应的信息。</p>
<p>github上有个开源的监测UI卡顿的库，BlockCanary，它的原理是利用主线程的消息队列处理机制，通过对比消息分发开始和结束的时间点来判断是否超过设定的时间。<br>通过在build.gradle配置中添加<br><a href="https://github.com/markzhai/AndroidPerformanceMonitor" target="_blank" rel="external">https://github.com/markzhai/AndroidPerformanceMonitor</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">dependencies &#123;</div><div class="line">    // most often used way, enable notification to notify block event</div><div class="line">    compile &apos;com.github.markzhai:blockcanary-android:1.4.0&apos;</div><div class="line"></div><div class="line">    // this way you only enable BlockCanary in debug package</div><div class="line">    // debugCompile &apos;com.github.markzhai:blockcanary-android:1.4.0&apos;</div><div class="line">    // releaseCompile &apos;com.github.markzhai:blockcanary-no-op:1.4.0&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>具体用法可以根据上面git的地址查看。</p>
<h3 id="Android异步处理技术"><a href="#Android异步处理技术" class="headerlink" title="Android异步处理技术"></a>Android异步处理技术</h3><h4 id="IntentService"><a href="#IntentService" class="headerlink" title="IntentService"></a>IntentService</h4><p>IntentService是继承自Service的，从源码上看，它是Service、HandlerThread和Handler的强强联合。源码也比AsyncTask简单，有兴趣的童鞋可以去看看。<br>再介绍另一个很有意思的方法，setIntentRedelivery()。从字面理解是设置intent重投递。如果设置为true，onStartCommand(Intent, int, int)将会返回START_REDELIVER_INTENT，如果onHandleIntent(Intent)返回之前进程死掉了，那么进程将会重新启动，intent重新投递，如果有大量的intent投递了，那么只保证最近的intent会被重投递。这个机制也很好，大家可以尝试着用。</p>
<p><code>这个机制可以用来处理后台进程被kill掉然后再重现执行相关app逻辑功能，感觉好流氓</code><br><a href="https://www.zhihu.com/question/28364663" target="_blank" rel="external">https://www.zhihu.com/question/28364663</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">public class SimpleIntentService extends IntentService &#123;</div><div class="line"></div><div class="line">    public SimpleIntentService() &#123;</div><div class="line">        super(SimpleIntentService.class.getName());</div><div class="line">        setIntentRedelivery(true);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int onStartCommand(Intent intent, int flags, int startId) &#123;</div><div class="line">        startActivity();</div><div class="line">        return super.onStartCommand(intent, flags, startId);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onHandleIntent(Intent intent) &#123;</div><div class="line">        while (true) &#123;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    boolean isStarted = false;</div><div class="line"></div><div class="line">    private void startActivity() &#123;</div><div class="line">        if (!isStarted) &#123;</div><div class="line">            Intent intent = new Intent(getApplicationContext(), MainActivity.class);</div><div class="line">            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);</div><div class="line">            getApplicationContext().startActivity(intent);</div><div class="line">            isStarted = true;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>代码试过了，用android自带的清除快捷方式结束进程，确实可以打开。但是进入到手机设置应用里强行停止却打不开了。</p>
<p>PS: <a href="https://www.zhihu.com/question/34652589" target="_blank" rel="external">https://www.zhihu.com/question/34652589</a></p>


                <hr>

                

                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2017/01/21/善用Android Studio异常调试功能/" data-toggle="tooltip" data-placement="top" title="善用Android Studio异常调试功能">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2016/12/21/Android神兵利器笔记/" data-toggle="tooltip" data-placement="top" title="Android神兵利器笔记">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                

                

            </div>
    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->

            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#android" title="android">android</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>

        </div>
    </div>
</article>









    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; fancychendong&#39;s Blog 2017 
                    <br>
                    Theme by <a href="http://huangxuan.me">Hux</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    Ported by <a href="http://blog.kaijun.rocks">Kaijun</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://fancychendong.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Side Catalog -->





<!-- Image to hack wechat -->
<img src="http://fancychendong.github.io/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
